# IDEACODE v12.1 - Global Instructions

Scope: ALL projects in /Volumes/M-Drive/Coding/

---

## ZERO TOLERANCE RULES

| Rule | Enforcement |
|------|-------------|
| TERMINAL ISOLATION | Detect repo at session start via `pwd`. Show "Working in: {repo}". ONLY work in THAT repo. Ask "Switch to {repo}? (Y/n)" before cross-repo work |
| NO BRANCH CHANGES | NEVER create/switch/delete branches without explicit approval. Ask: "Create/switch to {name}? (Y/n)" |
| OWN WORK ONLY | ONLY stage/commit/push work done in YOUR session. NEVER commit others' changes |
| NO CROSS-COMMIT | NEVER commit to other branches without approval. Verify branch before every commit |
| COMMIT BLOCKERS | When commit is blocked (wrong branch, others' changes staged, pre-commit failures), rectify ALL blocking issues FIRST, then complete the commit. NEVER leave commits incomplete |
| CROSS-PROJECT CAUTION | When modifying external files, check for conflicts with dependent files |
| NO STUBS | **ABSOLUTE BAN** on placeholder code. No `// TODO`, no empty functions, no "implement later". Every function MUST be complete. Applies to `.yolo` and `.swarm` |
| MANDATORY NAMING | Files: `{App}-{Module}-{Desc}-{YYMMDD}-V#.md` (YY=year, MM=month, DD=day) |
| NO HARDWIRING | Never hardcode. Use config/env. ABSOLUTE BAN in .yolo mode |
| NO DELETE | Never delete code without approval + pros/cons |
| NO MAIN COMMITS | NEVER commit to main. Use feature/bugfix/hotfix branches |
| NO AI MARKS | No "Generated by Claude", no emojis in commits |
| NO DUPLICATION | Library imports ONLY, never copy-paste code |
| WAIT FOR USER | STOP after questions, never proceed until answered |
| REGISTRY CHECK | Check PROJECT-REGISTRY.json before multi-repo ops |

---

## API & MCP

**API (preferred - 97% token savings):** `http://localhost:3847`
- **CRITICAL:** At session start, run: `/Volumes/M-Drive/Coding/ideacode/scripts/ensure-api-running.sh`
- This auto-checks health and starts server if needed
- Inform user when API is ready before proceeding
- Manual check: `curl -s http://localhost:3847/health`

**MCP (per-repo, manual):**
- Check: `/i.mcp status` | Start: `/i.mcp start` | Stop: `/i.mcp stop`
- Config: `{repo}/.claude/mcp.json`

**File size decision:**
| Size | Action |
|------|--------|
| <1.5KB | Read tool directly |
| >1.5KB | Use API |

---

## COMMANDS

| Category | Commands |
|----------|----------|
| Analysis | /i.think /i.analyze /i.research /i.review |
| Planning | /i.spec /i.plan /i.scan /i.document |
| Implementation | /i.develop /i.fix /i.implement /i.refactor |
| Repository | /i.repo /i.commit /i.branch |
| Advanced | /i.swarm /i.agent /i.createui |

**Modifiers:** .yolo .swarm .tdd .ood .solid .tcr .cot .tot .profile

---

## HARD RULES

| Rule | Enforcement |
|------|-------------|
| Questions | Display ALL first, use AskUserQuestion, ALWAYS include "Other" option |
| Options | For each: pros, cons, AI recommendation, optimal alternative, hybrid |
| Output | Tables/lists only, no prose, minimal tokens |
| SOLID | ALL code must follow SOLID principles |
| Test coverage | 90%+ critical paths |
| YOLO mode | No questions within repo scope. Only ask for: outside repo, external access, main branch |

---

## FILE NAMING

| Type | Pattern |
|------|---------|
| Docs | `App-Module-Desc-YYMMDD-V#.md` (YY=year, MM=month, DD=day) |
| Living | `LD-App-Module-Desc-V#.md` |
| Specs/Plans | `App-{Spec\|Plan}-Feature-YYMMDD-V#.md` |
| Context | `con-{app}-{module}-{desc}-{YYYYMMDD}.md` |
| Code (TS) | `{app}-{module}-{desc}.ts` |
| Code (Kotlin/Swift) | `{App}{Module}{Desc}.{kt\|swift}` |

**Examples:** ✅ `AvaConnect-Status-251209-V1.md` | ❌ `Status-251209-V1.md` (missing App-Module prefix)

---

## GLOBAL TECH STACK

| Component | Technology |
|-----------|------------|
| JVM | Java 17 |
| Cross-platform | KMP (Kotlin Multiplatform) |
| Android | Kotlin + Jetpack Compose + Material3 |
| iOS | Swift + SwiftUI (via KMP) |
| Web/Desktop | Tauri / React + TypeScript |
| Database | SQLDelight (cross-platform) |
| DI | Koin (KMP) / Hilt (Android-only) |
| Build | Gradle with version catalogs |

**Required inputs (all platforms):** Voice, Touch, Gaze, Keyboard, Mouse
**UI Override:** MagicUI (applies to all platforms)

---

## QUALITY GATES

| Metric | Target |
|--------|--------|
| Test coverage | 90%+ |
| Blockers | 0 |
| Warnings | 0 |

---

## VERSION & MEMORY

**Version:** Central source `/Volumes/M-Drive/Coding/ideacode/version-info.json`

**Memory indicators:**
| Indicator | Action |
|-----------|--------|
| `MEM:ok` | Safe to /clear |
| `MEM:save` | /compact now |
| `MEM:task[%]` | Finish task first |

---

## IDC PROFILES

| Profile | TDD | OOD | Verify |
|---------|-----|-----|--------|
| default | 50 | 40 | auto |
| strict | 30 | 30 | auto+visual |
| prototype | 90 | 80 | none |
| production | 40 | 40 | auto+visual |

Usage: `/i.develop .profile strict "feature"`

---

## AUTO-INVOKED

Always-On: SOLID, Reasoning (.cot/.tot/.rot), Skills (17), Subagents (15), Web search

---

Author: Manoj Jhawar | License: Proprietary | Version: 12.1.0 | Updated: 2025-12-17
Version Source: `/Volumes/M-Drive/Coding/ideacode/version-info.json`
