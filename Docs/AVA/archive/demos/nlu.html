<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NLU Classification Demo - AVA AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f7;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: #0f172a;
            font-size: 1.8em;
        }

        .back-link {
            color: #2563eb;
            text-decoration: none;
            font-weight: 600;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .panel {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .panel h2 {
            font-size: 1.3em;
            color: #0f172a;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-section {
            margin-bottom: 25px;
        }

        .input-section label {
            display: block;
            font-weight: 600;
            color: #64748b;
            margin-bottom: 10px;
        }

        .input-section textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
            min-height: 100px;
            outline: none;
            transition: border-color 0.2s;
        }

        .input-section textarea:focus {
            border-color: #2563eb;
        }

        .classify-btn {
            width: 100%;
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .classify-btn:hover {
            opacity: 0.9;
        }

        .classify-btn:active {
            transform: scale(0.98);
        }

        .results-section {
            background: #f9fafb;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .result-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            border-left: 4px solid #2563eb;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .intent-name {
            font-weight: 700;
            color: #0f172a;
            font-size: 1.1em;
        }

        .confidence-score {
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
        }

        .confidence-high {
            background: #d1fae5;
            color: #065f46;
        }

        .confidence-medium {
            background: #fed7aa;
            color: #92400e;
        }

        .confidence-low {
            background: #fee2e2;
            color: #991b1b;
        }

        .result-meta {
            font-size: 0.9em;
            color: #64748b;
            display: flex;
            gap: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            transition: width 0.3s ease;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: #f9fafb;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: 700;
            color: #2563eb;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.85em;
            color: #64748b;
        }

        .examples-section {
            background: #f9fafb;
            border-radius: 12px;
            padding: 15px;
            margin-top: 20px;
        }

        .example-item {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .example-item:hover {
            border-color: #2563eb;
            background: #faf5ff;
        }

        .example-text {
            color: #0f172a;
            font-size: 0.95em;
        }

        .example-meta {
            font-size: 0.75em;
            color: #64748b;
            margin-top: 5px;
        }

        .tech-specs {
            background: #1f2937;
            border-radius: 12px;
            padding: 20px;
            color: white;
            margin-top: 20px;
        }

        .tech-specs h3 {
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #fbbf24;
        }

        .spec-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #374151;
            font-size: 0.9em;
        }

        .spec-row:last-child {
            border-bottom: none;
        }

        .spec-label {
            color: #9ca3af;
        }

        .spec-value {
            color: #e5e7eb;
            font-weight: 600;
        }

        .intent-distribution {
            margin-top: 20px;
        }

        .distribution-bar {
            margin-bottom: 15px;
        }

        .distribution-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .distribution-track {
            width: 100%;
            height: 24px;
            background: #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
        }

        .distribution-fill {
            height: 100%;
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            display: flex;
            align-items: center;
            padding: 0 10px;
            color: white;
            font-size: 0.8em;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üß† NLU Classification Demo</h1>
        <a href="index.html" class="back-link">‚Üê Back to Suite</a>
    </div>

    <div class="main-content">
        <div class="panel">
            <h2>üéØ Intent Classifier</h2>

            <div class="input-section">
                <label>Enter text to classify:</label>
                <textarea id="inputText" placeholder="Type something like 'What's the weather today?' or 'Translate hello to Spanish'..."></textarea>
            </div>

            <button class="classify-btn" onclick="classifyText()">Classify Intent</button>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="tokenTime">0ms</div>
                    <div class="stat-label">Tokenization</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="inferenceTime">0ms</div>
                    <div class="stat-label">Inference</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalTime">0ms</div>
                    <div class="stat-label">Total Time</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="tokenCount">0</div>
                    <div class="stat-label">Tokens</div>
                </div>
            </div>

            <div class="results-section" id="resultsSection" style="display: none;">
                <h3 style="margin-bottom: 15px; color: #0f172a;">Classification Results</h3>
                <div id="resultsContainer"></div>
            </div>

            <div class="examples-section">
                <h3 style="margin-bottom: 12px; color: #0f172a;">üìù Try These Examples</h3>
                <div class="example-item" onclick="tryExample('What is the weather today?', 'weather')">
                    <div class="example-text">What is the weather today?</div>
                    <div class="example-meta">Expected: weather</div>
                </div>
                <div class="example-item" onclick="tryExample('Translate hello to Spanish', 'translate')">
                    <div class="example-text">Translate hello to Spanish</div>
                    <div class="example-meta">Expected: translate</div>
                </div>
                <div class="example-item" onclick="tryExample('Remind me to call mom at 5pm', 'reminder')">
                    <div class="example-text">Remind me to call mom at 5pm</div>
                    <div class="example-meta">Expected: reminder</div>
                </div>
                <div class="example-item" onclick="tryExample('Search for Italian restaurants nearby', 'search')">
                    <div class="example-text">Search for Italian restaurants nearby</div>
                    <div class="example-meta">Expected: search</div>
                </div>
                <div class="example-item" onclick="tryExample('What is quantum computing?', 'query')">
                    <div class="example-text">What is quantum computing?</div>
                    <div class="example-meta">Expected: query</div>
                </div>
            </div>
        </div>

        <div class="panel">
            <h2>üìä Analytics</h2>

            <div class="intent-distribution">
                <h3 style="margin-bottom: 15px; color: #0f172a;">Intent Distribution</h3>

                <div class="distribution-bar">
                    <div class="distribution-label">
                        <span>search</span>
                        <span id="searchCount">0</span>
                    </div>
                    <div class="distribution-track">
                        <div class="distribution-fill" id="searchBar" style="width: 0%;">0%</div>
                    </div>
                </div>

                <div class="distribution-bar">
                    <div class="distribution-label">
                        <span>translate</span>
                        <span id="translateCount">0</span>
                    </div>
                    <div class="distribution-track">
                        <div class="distribution-fill" id="translateBar" style="width: 0%;">0%</div>
                    </div>
                </div>

                <div class="distribution-bar">
                    <div class="distribution-label">
                        <span>reminder</span>
                        <span id="reminderCount">0</span>
                    </div>
                    <div class="distribution-track">
                        <div class="distribution-fill" id="reminderBar" style="width: 0%;">0%</div>
                    </div>
                </div>

                <div class="distribution-bar">
                    <div class="distribution-label">
                        <span>weather</span>
                        <span id="weatherCount">0</span>
                    </div>
                    <div class="distribution-track">
                        <div class="distribution-fill" id="weatherBar" style="width: 0%;">0%</div>
                    </div>
                </div>

                <div class="distribution-bar">
                    <div class="distribution-label">
                        <span>query</span>
                        <span id="queryCount">0</span>
                    </div>
                    <div class="distribution-track">
                        <div class="distribution-fill" id="queryBar" style="width: 0%;">0%</div>
                    </div>
                </div>

                <div class="distribution-bar">
                    <div class="distribution-label">
                        <span>general</span>
                        <span id="generalCount">0</span>
                    </div>
                    <div class="distribution-track">
                        <div class="distribution-fill" id="generalBar" style="width: 0%;">0%</div>
                    </div>
                </div>
            </div>

            <div class="tech-specs">
                <h3>‚öôÔ∏è Technical Specifications</h3>
                <div class="spec-row">
                    <span class="spec-label">Model</span>
                    <span class="spec-value">MobileBERT INT8</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">Model Size</span>
                    <span class="spec-value">25.5 MB</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">Vocabulary</span>
                    <span class="spec-value">30,522 tokens</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">Algorithm</span>
                    <span class="spec-value">WordPiece Tokenization</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">Runtime</span>
                    <span class="spec-value">ONNX Runtime Mobile 1.17.0</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">Acceleration</span>
                    <span class="spec-value">NNAPI (GPU/NPU)</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">Tokenization Target</span>
                    <span class="spec-value">&lt;5ms</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">Inference Target</span>
                    <span class="spec-value">&lt;50ms</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">Total Budget</span>
                    <span class="spec-value">&lt;60ms</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">Accuracy</span>
                    <span class="spec-value">95%+</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        let intentCounts = {
            search: 0,
            translate: 0,
            reminder: 0,
            weather: 0,
            query: 0,
            general: 0
        };
        let totalClassifications = 0;

        function classifyText() {
            const text = document.getElementById('inputText').value.trim();

            if (!text) {
                alert('Please enter some text to classify');
                return;
            }

            // Simulate tokenization
            const tokenTime = Math.floor(Math.random() * 3) + 2; // 2-5ms
            const tokenCount = Math.ceil(text.split(' ').length * 1.3); // Approx WordPiece tokens

            // Simulate inference
            const inferenceTime = Math.floor(Math.random() * 30) + 25; // 25-55ms
            const totalTime = tokenTime + inferenceTime;

            // Update stats
            document.getElementById('tokenTime').textContent = tokenTime + 'ms';
            document.getElementById('inferenceTime').textContent = inferenceTime + 'ms';
            document.getElementById('totalTime').textContent = totalTime + 'ms';
            document.getElementById('tokenCount').textContent = tokenCount;

            // Classify
            const results = performClassification(text);

            // Display results
            displayResults(results);

            // Update distribution
            updateDistribution(results[0].intent);
        }

        function performClassification(text) {
            const lower = text.toLowerCase();
            const candidates = ['search', 'translate', 'reminder', 'weather', 'query', 'general'];

            // Simple rule-based classification with confidence scores
            let scores = {};

            // Search
            scores.search = (lower.includes('search') || lower.includes('find') || lower.includes('look')) ? 0.92 : 0.15;

            // Translate
            scores.translate = (lower.includes('translate') || lower.includes('spanish') || lower.includes('french')) ? 0.94 : 0.12;

            // Reminder
            scores.reminder = (lower.includes('remind') || lower.includes('alarm') || lower.includes('schedule')) ? 0.89 : 0.13;

            // Weather
            scores.weather = (lower.includes('weather') || lower.includes('forecast') || lower.includes('temperature')) ? 0.96 : 0.10;

            // Query
            scores.query = (lower.includes('what is') || lower.includes('who is') || lower.includes('how')) ? 0.87 : 0.18;

            // General (default)
            scores.general = 0.65;

            // Sort by confidence
            const sorted = Object.entries(scores)
                .sort((a, b) => b[1] - a[1])
                .map(([intent, confidence]) => ({ intent, confidence }));

            return sorted.slice(0, 3); // Top 3 results
        }

        function displayResults(results) {
            const container = document.getElementById('resultsContainer');
            const section = document.getElementById('resultsSection');

            section.style.display = 'block';
            container.innerHTML = results.map((result, index) => {
                const confidencePercent = Math.floor(result.confidence * 100);
                const confidenceClass = result.confidence >= 0.7 ? 'confidence-high' :
                                       result.confidence >= 0.5 ? 'confidence-medium' : 'confidence-low';

                return `
                    <div class="result-item">
                        <div class="result-header">
                            <span class="intent-name">#${index + 1} ${result.intent}</span>
                            <span class="confidence-score ${confidenceClass}">${confidencePercent}%</span>
                        </div>
                        <div class="result-meta">
                            <span>Confidence: ${result.confidence.toFixed(4)}</span>
                            <span>Rank: ${index + 1}</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${confidencePercent}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateDistribution(intent) {
            intentCounts[intent]++;
            totalClassifications++;

            Object.keys(intentCounts).forEach(key => {
                const count = intentCounts[key];
                const percentage = totalClassifications > 0 ? (count / totalClassifications * 100) : 0;

                document.getElementById(key + 'Count').textContent = count;
                const bar = document.getElementById(key + 'Bar');
                bar.style.width = percentage + '%';
                bar.textContent = Math.floor(percentage) + '%';
            });
        }

        function tryExample(text, expectedIntent) {
            document.getElementById('inputText').value = text;
            classifyText();
        }
    </script>
</body>
</html>
