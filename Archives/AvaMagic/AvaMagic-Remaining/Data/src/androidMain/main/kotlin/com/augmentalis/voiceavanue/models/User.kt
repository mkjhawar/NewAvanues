package com.augmentalis.voiceavanue.models

import android.os.Parcelable
import kotlinx.parcelize.Parcelize

/**
 * User entity for cross-process communication.
 * Maps to Room User entity internally.
 *
 * @property id Unique user identifier
 * @property name User's display name
 * @property email User's email address
 * @property createdAt Timestamp when user was created (Unix epoch ms)
 * @property lastLoginAt Timestamp of last login (null if never logged in)
 *
 * @author Manoj Jhawar, manoj@ideahq.net
 * @version 1.0.0
 */
@Parcelize
data class User(
    val id: Int,
    val name: String,
    val email: String,
    val createdAt: Long,
    val lastLoginAt: Long? = null
) : Parcelable {

    companion object {
        /**
         * Create empty user instance for testing.
         */
        fun empty() = User(
            id = 0,
            name = "",
            email = "",
            createdAt = 0L,
            lastLoginAt = null
        )

        /**
         * Create new user with current timestamp.
         *
         * @param name User's display name
         * @param email User's email address
         * @return User instance ready for insertion
         */
        fun createNew(name: String, email: String) = User(
            id = 0, // Auto-generated by database
            name = name,
            email = email,
            createdAt = System.currentTimeMillis(),
            lastLoginAt = null
        )
    }
}
